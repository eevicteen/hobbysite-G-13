{% extends 'base.html' %}
{% load static %}

{% block title %} Commission List {% endblock %}

{% block content %}
<h1>COMMISSION DETAIL</h1>
<ul>
    <a href="{% url 'commissions:commissions-list' %}">Commission List</a>
    <p>TITLE: <br> {{commission.title}}</p>
    <p>AUTHOR: <br> {{commission.author}}</p>
    {% if user.profile == commission.author %}
        <a href="{% url 'commissions:commission-edit' commission.pk %}">Edit Commission</a>
    {% endif %}
    <p>JOBS:
        {% for job in jobs %}
            <br> <li>{{job.role}}</li>
            <br> 
            {% if user.is_authenticated %}
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="job_id" value="{{ job.id }}"/>
                    {{ form }}
                    {% if open_slots < 1 %}
                        <button disabled type="submit" value="Apply to Job">Apply to Job</button>

                    {% else %}
                        <button type="submit" value="Apply to Job">Apply to Job</button>
                    {% endif %}
                </form>
            {% endif %}
            
        {% endfor %}
    </p>
    <p>DESCRIPTION: <br> {{commission.description}}</p>
    <p>People required: <br> {{people_required}}</p>
    <p>Open Slots: <br> {{open_slots}}</p>
    <p>Created on: <br> {{commission.created_on}}</p>
    <p>Updated on: <br> {{commission.updated_on}}</p>
    <p> COMMENTS: </p>
    {% for comment in comments %}
        <p>{{comment.entry}}</p>
        <li>Created on: {{comment.created_on}}</li>
        <li>Updated on: {{comment.updated_on}}</li>
        <br>
    {% endfor %}
</ul>
{% endblock %}